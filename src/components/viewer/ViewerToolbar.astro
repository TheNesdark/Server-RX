---

---

<div class="toolbar">
    <div class="toolbar-left">
        <button class="tool-btn" title="Zoom & Pan">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
                <line x1="11" y1="8" x2="11" y2="14"></line>
                <line x1="8" y1="11" x2="14" y2="11"></line>
            </svg>
            <span>Zoom RX</span>
        </button>
        <div class="draw-tool-container">
            <button class="tool-btn draw-btn" title="Draw" id="draw-dropdown-btn">
                <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                    <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                    <path d="M2 2l7.586 7.586"></path>
                    <circle cx="11" cy="11" r="2"></circle>
                </svg>
                <span>Draw</span>
                <svg
                    class="dropdown-arrow"
                    width="12"
                    height="12"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
            </button>
            <div class="draw-shapes-menu" id="draw-menu">
                <button class="shape-option" data-shape="ArrowAnnotate">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                    <span>ArrowAnnotate</span>
                </button>
                <button class="shape-option" data-shape="Ruler">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path
                            d="M21.42 6.11l-3.53-3.53a1 1 0 0 0-1.42 0L2.58 16.47a1 1 0 0 0 0 1.42l3.53 3.53a1 1 0 0 0 1.42 0L21.42 7.53a1 1 0 0 0 0-1.42z"
                        ></path>
                        <path d="M10.41 10.59l1.42 1.42"></path>
                        <path d="M13.41 7.59l1.42 1.42"></path>
                    </svg>
                    <span>Ruler</span>
                </button>
                <button class="shape-option" data-shape="Circle">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <circle cx="12" cy="12" r="10"></circle>
                    </svg>
                    <span>Circle</span>
                </button>
                <button class="shape-option" data-shape="Ellipse">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <ellipse cx="12" cy="12" rx="10" ry="6"></ellipse>
                    </svg>
                    <span>Ellipse</span>
                </button>
                <button class="shape-option" data-shape="Rectangle">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"
                        ></rect>
                    </svg>
                    <span>Rectangle</span>
                </button>
                <button class="shape-option" data-shape="Protractor">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path d="M12 2a10 10 0 0 0-10 10h20a10 10 0 0 0-10-10z"
                        ></path>
                        <line x1="12" y1="12" x2="18" y2="6"></line>
                    </svg>
                    <span>Protractor</span>
                </button>
                <button class="shape-option" data-shape="Roi">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                        <polyline points="2 17 12 22 22 17"></polyline>
                        <polyline points="2 12 12 17 22 12"></polyline>
                    </svg>
                    <span>ROI</span>
                </button>
                <button class="shape-option" data-shape="Eraser">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path d="M20 20H7L3 16l9-9a2.8 2.8 0 0 1 4 0l4 4a2.8 2.8 0 0 1 0 4l-5 5"></path>
                    </svg>
                    <span>Eraser</span>
                </button>
                <div class="menu-separator"></div>
                <button class="shape-option" data-action="clear">
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path d="M3 6h18"></path>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                        <line x1="10" y1="11" x2="10" y2="17"></line>
                        <line x1="14" y1="11" x2="14" y2="17"></line>
                    </svg>
                    <span>Limpiar todo</span>
                </button>
            </div>
        </div>
        <button class="tool-btn" title="OrientationMarkers" data-overlay-tool="true">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <circle cx="12" cy="12" r="9"></circle>
                <line x1="12" y1="3" x2="12" y2="8"></line>
                <line x1="12" y1="16" x2="12" y2="21"></line>
                <line x1="3" y1="12" x2="8" y2="12"></line>
                <line x1="16" y1="12" x2="21" y2="12"></line>
            </svg>
            <span>Orientation</span>
        </button>
        <button class="tool-btn" title="ScaleOverlay" data-overlay-tool="true">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <line x1="4" y1="19" x2="20" y2="19"></line>
                <line x1="4" y1="15" x2="4" y2="19"></line>
                <line x1="8" y1="17" x2="8" y2="19"></line>
                <line x1="12" y1="15" x2="12" y2="19"></line>
                <line x1="16" y1="17" x2="16" y2="19"></line>
                <line x1="20" y1="15" x2="20" y2="19"></line>
            </svg>
            <span>Escala</span>
        </button>
        <button class="tool-btn" title="BorderMagnify">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
                <rect x="8" y="8" width="6" height="6"></rect>
            </svg>
            <span>BorderMagnify</span>
        </button>
        <button class="tool-btn" title="Rotate">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <polyline points="23 4 23 10 17 10"></polyline>
                <path d="M20.49 15a9 9 0 1 1 2.13-9"></path>
            </svg>
            <span>Rotate</span>
        </button>
        <button class="tool-btn" title="Reset">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"
                ></path>
                <path d="M21 3v5h-5"></path>
                <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"
                ></path>
            </svg>
            <span>Reset</span>
        </button>
    </div>

    <div class="toolbar-right">
        <button class="tool-btn" title="Compartir" id="share-btn">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                <polyline points="16 6 12 2 8 6"></polyline>
                <line x1="12" y1="2" x2="12" y2="15"></line>
            </svg>
            <span>Compartir</span>
        </button>
        <button class="tool-btn" title="Ayuda" id="modal-open">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
            <span>Ayuda</span>
        </button>
        <button class="tool-btn" title="Close" onclick="window.location.href='/'">
            <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
        </div>
    </div>
</div>

<script>
    document.getElementById("share-btn")?.addEventListener("click", () => {
        const shareModal = document.getElementById("share-modal");
        if (shareModal) {
            shareModal.classList.add('active');
        }
    });
</script>

<style>
    .toolbar {
        background: #111517;
        border-bottom: 1px solid rgba(255, 255, 255, 0.12);
        padding: 10px 14px;
        display: flex;
        justify-content: space-between;
        gap: 10px;
    }

    .toolbar-left,
    .toolbar-right {
        display: flex;
        gap: 6px;
        align-items: center;
        flex-wrap: wrap;
    }

    .tool-btn {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.14);
        color: var(--viewer-text-secondary);
        height: 36px;
        padding: 0 10px;
        border-radius: 9px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 7px;
        font-size: 12.5px;
        font-weight: 500;
        transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    }

    .tool-btn:hover {
        background: rgba(79, 168, 159, 0.14);
        border-color: rgba(79, 168, 159, 0.46);
        color: #eef2f1;
    }

    .tool-btn.active {
        background: rgba(79, 168, 159, 0.2);
        border-color: rgba(79, 168, 159, 0.52);
        color: #f3f6f5;
    }

    .tool-btn.active:hover {
        background: rgba(79, 168, 159, 0.26);
    }

    .tool-btn:disabled {
        opacity: 0.42;
        cursor: not-allowed;
        border-color: rgba(255, 255, 255, 0.1);
        color: rgba(166, 180, 178, 0.75);
    }

    .tool-btn:disabled:hover {
        background: rgba(255, 255, 255, 0.04);
        border-color: rgba(255, 255, 255, 0.1);
        color: rgba(166, 180, 178, 0.75);
    }

    .tool-btn svg {
        width: 16px;
        height: 16px;
    }

    .draw-tool-container {
        position: relative;
    }

    .draw-btn {
        position: relative;
    }

    .dropdown-arrow {
        width: 13px !important;
        height: 13px !important;
        margin-left: 4px;
        transition: transform 0.2s ease;
    }

    .draw-btn.active .dropdown-arrow {
        transform: rotate(180deg);
    }

    .draw-shapes-menu {
        position: absolute;
        top: calc(100% + 4px);
        left: 0;
        background: #151a1d;
        border: 1px solid rgba(255, 255, 255, 0.16);
        border-radius: 10px;
        padding: 5px;
        min-width: 180px;
        display: none;
        flex-direction: column;
        gap: 2px;
        z-index: 1000;
        box-shadow: var(--viewer-shadow-md);
        transform-origin: top left;
        animation: fadeIn 0.18s ease forwards;
    }

    .draw-shapes-menu.show {
        display: flex;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(-6px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .shape-option {
        background: transparent;
        border: none;
        color: var(--viewer-text-secondary);
        padding: 8px 10px;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 12.5px;
        transition: background-color 0.2s ease, color 0.2s ease;
        text-align: left;
        width: 100%;
    }

    .shape-option:hover {
        background: rgba(79, 168, 159, 0.16);
        color: #f0f5f4;
    }

    .shape-option svg {
        width: 16px;
        height: 16px;
        flex-shrink: 0;
    }

    .menu-separator {
        height: 1px;
        background: rgba(255, 255, 255, 0.12);
        margin: 5px 0;
    }

    @media (max-width: 1024px) {
        .toolbar {
            padding: 10px 12px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tool-btn {
            padding: 0 9px;
            font-size: 12px;
        }

        .tool-btn svg {
            width: 16px;
            height: 16px;
        }
    }

    @media (max-width: 768px) {
        .toolbar {
            padding: 8px;
            gap: 6px;
        }

        .toolbar-left,
        .toolbar-right {
            gap: 6px;
        }

        .tool-btn {
            padding: 0 8px;
            min-width: 34px;
        }

        .tool-btn span {
            display: none !important;
        }

        .draw-btn {
            min-width: auto;
        }

        .dropdown-arrow {
            margin-left: 0;
        }
    }

    @media (max-width: 480px) {
        .toolbar {
            padding: 6px;
            gap: 4px;
        }

        .tool-btn {
            padding: 0 7px;
            height: 34px;
        }

        .tool-btn svg {
            width: 16px;
            height: 16px;
        }

        .draw-shapes-menu {
            min-width: 148px;
            left: auto;
            right: 0;
        }

        .shape-option {
            padding: 8px 10px;
            font-size: 12px;
        }

        .shape-option svg {
            width: 16px;
            height: 16px;
        }
    }
</style>
